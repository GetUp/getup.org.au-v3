<script>
  import CampaignCard from "./campaign-card.svelte";
  import { campaigns as rootCampaigns } from "$lib/data/content";

  let { heading = "Take action", actions = rootCampaigns } = $props();

  const formattedActions = actions
    .filter((action) => !action.archived)
    .map((action) => ({
      ...action,
      title: action.heading || action.title,
      href: action.link || action.path || action.href || "#",
      featured: action.featured || false,
      badge: action.badge,
      pillar: action.pillar,
    }));
</script>

<section class="pb-8 md:py-12 px-4 bg-white scroll-snap-section">
  <div class="max-w-7xl mx-auto">
    <h2 class="font-header text-6xl text-slate-light mb-8">
      {heading.toUpperCase()}
    </h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {#each formattedActions as action}
        <CampaignCard
          campaign={{
            title: action.title,
            excerpt: action.excerpt,
            image: action.image || "/placeholder.svg",
            href: action.href,
            badge: action.badge || (action.featured ? "FEATURED" : undefined),
            category: action.pillar,
          }}
          variant="light"
          layout="vertical"
          isFeatured={action.featured}
          isOther={!action.featured}
          truncate={!action.featured}
          className="shadow-md hover:shadow-xl"
        />
      {/each}
    </div>
  </div>
</section>
